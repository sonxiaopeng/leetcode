<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      // 给定 n 个非负整数表示每个宽度为 1 的柱子的高度图，计算按此排列的柱子，下雨之后能接多少雨水。
      /**
       * @param {number[]} height
       * @return {number}
       */
      var trap = function (height) {
        // 对于任何一个格子，它能够接住的雨水等于左边最高的和右边最高的最小值 减去自身的高度
        let len = height.length;

        let leftArr = new Array(len);
        let rightArr = new Array(len);

        let l_max = 0;
        let r_max = 0;

        for (let i = 0; i < len; i++) {
          let left = height[i];
          let right = height[len - 1 - i];
          l_max = leftArr[i] = Math.max(l_max, left);
          r_max = rightArr[len - 1 - i] = Math.max(r_max, right);
        }

        let ans = 0;

        for (let i = 0; i < len; i++) {
          let minHeight = Math.min(leftArr[i], rightArr[i]);

          if (minHeight > height[i]) {
            ans += minHeight - height[i];
          }
        }

        return ans;
      };

      console.log(trap([0, 1, 0, 2, 1, 0, 1, 3, 2, 1, 2, 1]));
    </script>
  </body>
</html>
