<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Document</title>
  </head>
  <body>
    <script>
      /**
       * @param {string} s
       * @return {number}
       */
      var lengthOfLongestSubstring = function (s) {
        if (s.length === 0) {
          return 0;
        }

        let left = 0;
        let right = 0;
        let max = 0;
        let map = new Map();

        while (right < s.length) {
          const char = s[right];
          const beforeIndex = map.get(char);
          // if( beforeIndex !== undefined){ // 之前有重复
          // 说明存在,进行一次结算
          // for(let i = left ;i < beforeIndex + 1;i++){
          //   map.delete(s[i])
          // }
          if (beforeIndex !== undefined && beforeIndex >= left) {
            // 其实可以不用删除之前的，判断一下index即可
            left = beforeIndex + 1;
          }
          // }

          max = Math.max(max, right - left);
          map.set(s[right], right);
          right++;
        }

        return max + 1;
      };

      // console.log(lengthOfLongestSubstring("abcabcbb"))
      // console.log(lengthOfLongestSubstring("bbbbb"))
      // console.log(lengthOfLongestSubstring("pwwkew"))
      // console.log(lengthOfLongestSubstring("au"))
      // console.log(lengthOfLongestSubstring(" "))
      console.log(lengthOfLongestSubstring("abba"));
    </script>
  </body>
</html>
